---

# Variables to hold lookup functions
admin_secret_lookup: "{{ lookup('k8s', kind='Secret', namespace=namespace, resource_name=admin_secret_name) }}"
connect_secret_lookup: "{{ lookup('k8s', kind='Secret', namespace=namespace, resource_name=connect_secret_name) }}"
password_lookup: "{{ lookup('password', '/dev/null') }}"
init_configmap_lookup: "{{ lookup('k8s', kind='ConfigMap', namespace=namespace, resource_name=init_configmap_name) }}"
service_lookup: "{{ lookup('k8s', kind='Service', namespace=namespace, resource_name=service_name) }}"
route_lookup: "{{ lookup('openshift', kind='Route', namespace=namespace, resource_name=route_name) }}"
binaries_pvc_lookup: "{{ lookup('k8s', kind='PersistentVolumeClaim', namespace=namespace, resource_name=binaries_pvc_name) }}"

# Whether we are in a cluster or not.
pod_name: "{{ lookup('env', 'POD_NAME') }}"
pod_namespace: "{{ lookup('env', 'POD_NAMESPACE') }}"
in_cluster: "{{ True if (pod_name and pod_namespace) else False }}"

# Variables to hold resource names
admin_secret_name: "{{ name + '-admin' if auth_existingAdminSecret is undefined else auth_existingAdminSecret }}"
connect_secret_name: "{{ name + '-connect' if connectExistingSecret is undefined else connectExistingSecret }}"
admin_password: "{{ password_lookup if auth_adminPassword is undefined else auth_adminPassword }}"
init_configmap_name: "{{ name + '-config'}}"
service_name: "{{ name + '-service'}}"
route_name: "{{ name + '-route'}}"
binaries_pvc_name: "{{ name + '-binaries-pvc'}}"